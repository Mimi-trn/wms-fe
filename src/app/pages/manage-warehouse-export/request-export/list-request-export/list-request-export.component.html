<!-- Danh sách yêu cầu xuất kho -->
<nz-row nzAlign="middle" class="mb-12">
  <app-breadcrumb
    nz-col
    [nzSpan]="23"
    *ngIf="isBreadcrumb"
    [listBreadCrumb]="breadcrumbs"
    [isHidden]="isHidden"
  ></app-breadcrumb>
</nz-row>

<div class="common-bg">
  <nz-row nzJustify="center" class="mb-12">
    <h2 class="m-0">
      {{ "sidebar.export.child.exportRequest.child.list" | translate }}
    </h2>
  </nz-row>
  <!-- Searching common -->
  <nz-row>
    <nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" nzXXl="24">
      <h4 class="m-0">{{ "search.general" | translate }}</h4>
    </nz-col>
    <nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="10" nzXl="8" nzXXl="6">
      <form (ngSubmit)="searchGeneralFunc()">
        <nz-input-group
          [nzPrefix]="prefixButtonSearch"
          [nzSuffix]="suffixButtonClear"
        >
          <input
            type="text"
            nz-input
            placeholder="{{ 'search.general.placeholder' | translate }}"
            [(ngModel)]="searchGeneral"
            name="searchGeneral"
          />
        </nz-input-group>
        <ng-template #prefixButtonSearch>
          <span
            class="search-click"
            style="color: #d9d9d9"
            nz-icon
            nzType="search"
            (click)="searchGeneralFunc()"
          ></span>
        </ng-template>
        <ng-template #suffixButtonClear>
          <span
            nz-icon
            class="ant-input-clear-icon"
            nzTheme="fill"
            nzType="close-circle"
            *ngIf="searchGeneral"
            (click)="this.searchGeneral = ''; searchGeneralFunc()"
          ></span>
        </ng-template>
      </form>
    </nz-col>
  </nz-row>

  <nz-row
    nzAlign="bottom"
    nzJustify="space-between"
    nzGutter="16"
    class="mb-12"
  >
    <nz-col
      nzXs="24"
      nzSm="24"
      nzMd="24"
      nzLg="24"
      nzXl="24"
      nzXXl="24"
      class="mt-12"
    >
      <nz-row nzJustify="end" nzGutter="16">
        <nz-col
          *ngIf="
            checkIsRole('wms_export-request_create') ||
            checkIsRole('FCIM_ADMIN')
          "
        >
          <app-button
            [title]="'add.new'"
            [buttonType]="'text'"
            [iconType]="'plus-circle'"
            [iconTheme]="'outline'"
            [tooltipTitle]="'Thêm mới yêu cầu xuất kho'"
            (btnClick)="onHandleAddNew()"
          ></app-button>
        </nz-col>
        <nz-col>
          <button
            nz-button
            nzType="text"
            class="p-0"
            nz-tooltip
            nz-dropdown
            [nzDropdownMenu]="configColumns"
          >
            <img src="./assets/image/svg/exportRequest_column.svg" alt="" />
            <nz-dropdown-menu #configColumns="nzDropdownMenu">
              <div
                style="
                  background-color: white;
                  padding: 8px 12px;
                  border: 1px solid #ccc;
                "
              >
                <ng-container>
                  <label
                    class="mb-4"
                    nz-checkbox
                    [(ngModel)]="allChecked"
                    (ngModelChange)="onHandleUpdateAllChecked()"
                    [nzIndeterminate]="indeterminate"
                  >
                    Tất cả
                  </label>
                  <br />
                </ng-container>
                <ng-container *ngFor="let column of columns; let i = index">
                  <label
                    [(ngModel)]="column.check"
                    nz-checkbox
                    (ngModelChange)="onClickCheckBox(column)"
                    >{{ column.keyTitle | translate }}</label
                  >
                  <br />
                </ng-container>
              </div>
            </nz-dropdown-menu>
          </button>
        </nz-col>
      </nz-row>
    </nz-col>
  </nz-row>

  <nz-row>
    <nz-col nzSpan="24">
      <nz-table
        nzBordered
        [nzFrontPagination]="false"
        [nzShowPagination]="false"
        [nzScroll]="{ x: 'auto' }"
        [nzData]="listData"
        #nzTable
        nzSize="small"
        class="w-100"
      >
        <thead>
          <tr>
            <ng-container *ngFor="let column of columns; let i = index">
              <ng-container *ngIf="column.check">
                <!-- <th nz-resizable nzBounds="window" nzPreview [nzWidth]="column.width" [nzMaxWidth]="300"
                  [nzMinWidth]="100" (nzResizeEnd)="onResize($event, column)" nzAlign="center" style="cursor: pointer"
                  (click)="customSortFunction(column)"> -->
                <th
                  nz-resizable
                  [nzWidth]="column.width"
                  (nzResize)="onResize($event, i)"
                  [nzMaxWidth]="500"
                  [nzMinWidth]="100"
                  style="cursor: pointer"
                  (click)="customSortFunction(column)"
                >
                  <div class="editable-cell">
                    {{ column.keyTitle | translate }}
                    <nz-resize-handle nzDirection="right">
                      <div class="resize-trigger"></div>
                    </nz-resize-handle>
                    <span
                      *ngIf="column.count == 0"
                      style="
                        float: right;
                        position: absolute;
                        bottom: 12px;
                        right: 10px;
                        cursor: pointer;
                      "
                      nz-tooltip="Sắp xếp giảm dần"
                      nz-icon
                      nzType="swap"
                      [nzRotate]="90"
                      nzTheme="outline"
                    ></span>
                    <span
                      *ngIf="column.count > 0 && column.sortOrder == 'descend'"
                      style="
                        float: right;
                        position: absolute;
                        bottom: 12px;
                        right: 10px;
                        cursor: pointer;
                      "
                      nz-tooltip="Sắp xếp tăng dần"
                      nz-icon
                      nzType="arrow-down"
                      nzTheme="outline"
                    ></span>
                    <span
                      *ngIf="column.count > 0 && column.sortOrder == 'ascend'"
                      style="
                        float: right;
                        position: absolute;
                        bottom: 12px;
                        right: 10px;
                        cursor: pointer;
                      "
                      nz-tooltip="Sắp xếp giảm dần"
                      nz-icon
                      nzType="arrow-up"
                      nzTheme="outline"
                    ></span>
                  </div>
                </th>
              </ng-container>
            </ng-container>
            <th nzWidth="100px" nzAlign="center" nzRight>
              {{ "table.action" | translate }}
            </th>
          </tr>
        </thead>
        <tbody [class]="listData.length <= 0 ? '' : 'striped-tr'">
          <tr>
            <ng-container *ngFor="let column of columns">
              <ng-container *ngIf="column.check">
                <td *ngIf="column.keyName == 'exportRequestCode'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixexportRequestCode"
                    [nzSuffix]="suffixexportRequestCode"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.exportRequestCode"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixexportRequestCode>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixexportRequestCode>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.exportRequestCode"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>
                <td *ngIf="column.keyName == 'exportType'">
                  <nz-select
                    class="select-search"
                    style="width: 100%"
                    [nzAllowClear]="true"
                    nzPlaceHolder="{{ 'all_select' | translate }}"
                    [(ngModel)]="dataFilter[column.keyName]"
                    (ngModelChange)="search()"
                  >
                    <nz-option
                      [nzValue]="1"
                      nzLabel="Xuất kho sản xuất"
                    ></nz-option>
                    <nz-option
                      [nzValue]="3"
                      nzLabel="Xuất kho khác"
                    ></nz-option>
                  </nz-select>
                </td>
                <!-- <td *ngIf="column.keyName == 'soCode'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixsoCode"
                    [nzSuffix]="suffixsoCode"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.soCode"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixsoCode>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixsoCode>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.soCode"
                      (click)="clear(column)"
                    ></span>
                  </ng-template>
                </td> -->
                <td *ngIf="column.keyName == 'customerCode'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixcustomerCode"
                    [nzSuffix]="suffixcustomerCode"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.customerCode"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixcustomerCode>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixcustomerCode>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.customerCode"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>
                <td *ngIf="column.keyName == 'orderDate'">
                  <nz-range-picker
                    [(ngModel)]="dataFilter[column.keyName]"
                    (ngModelChange)="getExportRequest()"
                    [nzPlaceHolder]="[
                      'start_date' | translate,
                      'end_date' | translate
                    ]"
                  ></nz-range-picker>
                </td>
                <td *ngIf="column.keyName == 'woCode'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixwoCode"
                    [nzSuffix]="suffixwoCode"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.woCode"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixwoCode>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixwoCode>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.woCode"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>

                <td *ngIf="column.keyName == 'lotId'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixlotId"
                    [nzSuffix]="suffixlotId"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.lotId"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixlotId>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixlotId>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.lotId"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>

                <td *ngIf="column.keyName == 'lotNumber'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixlotNumber"
                    [nzSuffix]="suffixlotNumber"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.lotNumber"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixlotNumber>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixlotNumber>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.lotNumber"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>
                <!-- <td *ngIf="column.keyName == 'techFormCode'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixtechFormCode"
                    [nzSuffix]="suffixtechFormCode"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.techFormCode"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixtechFormCode>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixtechFormCode>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.techFormCode"
                      (click)="clear(column)"
                    ></span>
                  </ng-template>
                </td> -->
                <td *ngIf="column.keyName == 'totalLotNumber'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixtotalLotNumber"
                    [nzSuffix]="suffixtotalLotNumber"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.totalLotNumber"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixtotalLotNumber>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixtotalLotNumber>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.totalLotNumber"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>
                <!-- <td *ngIf="column.keyName == 'techFormName'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixtechFormName"
                    [nzSuffix]="suffixtechFormName"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.techFormName"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixtechFormName>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixtechFormName>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.techFormName"
                      (click)="clear(column)"
                    ></span>
                  </ng-template>
                </td> -->
                <td *ngIf="column.keyName == 'startAt'">
                  <nz-range-picker
                    [(ngModel)]="dataFilter[column.keyName]"
                    (ngModelChange)="getExportRequest()"
                    [nzPlaceHolder]="[
                      'start_date' | translate,
                      'end_date' | translate
                    ]"
                  ></nz-range-picker>
                </td>
                <td *ngIf="column.keyName == 'endAt'">
                  <nz-range-picker
                    [(ngModel)]="dataFilter[column.keyName]"
                    (ngModelChange)="getExportRequest()"
                    [nzPlaceHolder]="[
                      'start_date' | translate,
                      'end_date' | translate
                    ]"
                  ></nz-range-picker>
                </td>
                <td *ngIf="column.keyName == 'deliveryAt'">
                  <nz-range-picker
                    [(ngModel)]="dataFilter[column.keyName]"
                    (ngModelChange)="getExportRequest()"
                    [nzPlaceHolder]="[
                      'start_date' | translate,
                      'end_date' | translate
                    ]"
                  ></nz-range-picker>
                </td>
                <td *ngIf="column.keyName == 'createdBy'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixcreatedBy"
                    [nzSuffix]="suffixcreatedBy"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.createdBy"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixcreatedBy>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixcreatedBy>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.createdBy"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>
                <td *ngIf="column.keyName == 'createdAt'">
                  <nz-range-picker
                    [(ngModel)]="dataFilter[column.keyName]"
                    (ngModelChange)="getExportRequest()"
                    [nzPlaceHolder]="[
                      'start_date' | translate,
                      'end_date' | translate
                    ]"
                  ></nz-range-picker>
                </td>
                <td *ngIf="column.keyName == 'updatedAt'">
                  <nz-range-picker
                    [(ngModel)]="dataFilter[column.keyName]"
                    (ngModelChange)="getExportRequest()"
                    [nzPlaceHolder]="[
                      'start_date' | translate,
                      'end_date' | translate
                    ]"
                  ></nz-range-picker>
                </td>

                <td *ngIf="column.keyName == 'status'">
                  <nz-select
                    class="select-search"
                    style="width: 100%"
                    [nzAllowClear]="true"
                    nzPlaceHolder="{{ 'all_select' | translate }}"
                    [(ngModel)]="dataFilter[column.keyName]"
                    (ngModelChange)="search()"
                  >
                    <nz-option
                      *ngFor="let item of listStatus"
                      [nzValue]="item.value"
                      [nzLabel]="item.text"
                    ></nz-option>
                  </nz-select>
                </td>
                <td *ngIf="column.keyName == 'note'">
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixnote"
                    [nzSuffix]="suffixnote"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter.note"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixnote>
                    <span
                      (click)="search()"
                      class="search-click"
                      style="color: #d9d9d9"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixnote>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter.note"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>
                <td
                  *ngIf="
                    (column.check && column.keyName == 'customerName') ||
                    column.keyName == 'productName' ||
                    column.keyName == 'productCode' ||
                    column.keyName == 'soCode'
                  "
                >
                  <nz-input-group
                    nzSearch
                    [nzPrefix]="prefixInput"
                    [nzSuffix]="suffixInput"
                  >
                    <input
                      type="text"
                      nz-input
                      [(ngModel)]="dataFilter[column.keyName]"
                      (keyup)="enterSearch($event)"
                    />
                  </nz-input-group>
                  <ng-template #prefixInput>
                    <span
                      style="color: #d9d9d9"
                      (click)="search()"
                      class="search-click"
                      nz-icon
                      nzType="search"
                    ></span>
                  </ng-template>
                  <ng-template #suffixInput>
                    <span
                      nz-icon
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="dataFilter[column.keyName]"
                      (click)="clear(column); search()"
                    ></span>
                  </ng-template>
                </td>
              </ng-container>
            </ng-container>
            <td nzRight></td>
          </tr>
          <ng-container *ngFor="let row of nzTable.data; let i = index">
            <tr>
              <ng-container *ngFor="let column of columns; let j = index">
                <ng-container *ngIf="column.check">
                  <td
                    *ngIf="
                      column.keyName !== 'exportType' &&
                      column.keyName !== 'orderDate' &&
                      column.keyName !== 'deliveryAt' &&
                      column.keyName !== 'startAt' &&
                      column.keyName !== 'endAt' &&
                      column.keyName !== 'createdAt' &&
                      column.keyName !== 'updatedAt' &&
                      column.keyName !== 'status'
                    "
                  >
                    {{ row[column.keyName] }}
                  </td>
                  <td *ngIf="column.keyName == 'exportType'">
                    <ng-container *ngFor="let item of listExportType">
                      <ng-container *ngIf="row['exportType'] == item.value">
                        {{ item.text }}
                      </ng-container>
                    </ng-container>
                  </td>
                  <td *ngIf="column.keyName === 'updatedAt'" nzAlign="right">
                    {{ row["updatedAt"] | date : "dd/MM/yyyy" }}
                  </td>
                  <td *ngIf="column.keyName === 'createdAt'" nzAlign="right">
                    {{ row["createdAt"] | date : "dd/MM/yyyy" }}
                  </td>
                  <td *ngIf="column.keyName === 'orderDate'" nzAlign="right">
                    {{ row["orderDate"] | date : "dd/MM/yyyy" }}
                  </td>
                  <td *ngIf="column.keyName === 'deliveryAt'" nzAlign="right">
                    {{ row["deliveryAt"] | date : "dd/MM/yyyy" }}
                  </td>
                  <td *ngIf="column.keyName === 'startAt'" nzAlign="right">
                    {{ row["startAt"] | date : "dd/MM/yyyy" }}
                  </td>
                  <td *ngIf="column.keyName === 'endAt'" nzAlign="right">
                    {{ row["endAt"] | date : "dd/MM/yyyy" }}
                  </td>
                  <td *ngIf="column.keyName == 'status'" nzAlign="center">
                    <div [ngSwitch]="row[column.keyName]">
                      <!-- <div
                        class="border-element bordered-element__status_2"
                        *ngSwitchCase="'0'"
                      >
                        Bản nháp
                      </div> -->
                      <div
                        class="border-element bordered-element__status_4"
                        *ngSwitchCase="'1'"
                      >
                        <span
                          *ngIf="
                            checkGroupsInTokenQcer ||
                              checkGroupsInTokenAdmin ||
                              checkGroupsInTokenSaler ||
                              checkIsRole('FCIM_ADMIN');
                            else isKeeper
                          "
                          >Yêu cầu mới</span
                        >

                        <ng-template #isKeeper> Yêu cầu mới </ng-template>
                      </div>
                      <div
                        class="border-element bordered-element__status_8"
                        *ngSwitchCase="'2'"
                      >
                        Đã từ chối xuất kho
                      </div>
                      <div
                        class="border-element bordered-element__status_9"
                        *ngSwitchCase="'3'"
                      >
                        Đang xuất kho
                      </div>
                      <div
                        class="border-element bordered-element__status_1"
                        *ngSwitchCase="'4'"
                      >
                        Đã xuất kho
                      </div>
                    </div>
                  </td>
                </ng-container>
              </ng-container>
              <td nzAlign="center" nzRight>
                <div class="d-flex" style="justify-content: space-evenly">
                  <!-- <div class="w-32px">
                    <button
                      *ngIf="
                        row['status'] == 1 &&
                        (checkIsRole('wms_export-request_update') ||
                          checkIsRole('FCIM_ADMIN'))
                      "
                      nz-button
                      nzType="text"
                      (click)="onHandleRecalL(row)"
                      nz-tooltip="Thu hồi yêu cầu xuất kho"
                      style="
                        padding: 0;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        width: 32px;
                        height: 32px;
                      "
                    >
                      <img src="./assets/image/svg/gdn_revoke.svg" />
                    </button>
                  </div> -->
                  <div class="w-32px">
                    <app-button
                      *ngIf="row['status'] == 1 || row['status'] == 3"
                      [iconType]="'plus-circle'"
                      [iconTheme]="'fill'"
                      [buttonType]="'text'"
                      nz-tooltip="Tạo phiếu xuất kho"
                      (btnClick)="onHandleCreateGDN(row)"
                    ></app-button>
                  </div>
                  <div class="w-32px">
                    <app-button
                      *ngIf="row['status'] == 1 || row['status'] == 3"
                      [iconType]="'plus-circle'"
                      [iconTheme]="'fill'"
                      [buttonType]="'text'"
                      nz-tooltip="Từ chối yêu cầu"
                      [rotate]="135"
                      (btnClick)="onHandleRefuse(row)"
                    ></app-button>
                  </div>
                  <div class="w-32px">
                    <app-button
                      [iconType]="'info-circle'"
                      [iconTheme]="'fill'"
                      [buttonType]="'text'"
                      nz-tooltip="Xem chi tiết"
                      (btnClick)="onHandleView(row)"
                    ></app-button>
                  </div>
                </div>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </nz-table>
    </nz-col>
  </nz-row>
  <nz-row *ngIf="total" nzGutter="24" nzAlign="middle" nzJustify="center">
    <div nz-col nzSpan="24">
      <app-pagination
        [currentPage]="page"
        [currentSize]="per_page"
        [total]="total"
        (emitPage)="pagination($event)"
      ></app-pagination>
    </div>
  </nz-row>

  <nz-modal
    nzWidth="800px"
    [(nzVisible)]="visibleRevoke"
    [nzFooter]="null"
    (nzOnCancel)="onClickCancelRevoke()"
    [nzContent]="showAddNewContentRevoke"
    [nzTitle]="showAddNewTitleRevoke"
  >
    <ng-template #showAddNewTitleRevoke>
      <div class="d-flex">
        <svg
          width="24"
          height="25"
          viewBox="0 0 24 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_1180_25964)">
            <path
              d="M21.6 0.5H2.4C1.08 0.5 0 1.58 0 2.9V24.5L4.8 19.7H21.6C22.92 19.7 24 18.62 24 17.3V2.9C24 1.58 22.92 0.5 21.6 0.5ZM12 11.3C11.34 11.3 10.8 10.76 10.8 10.1V5.3C10.8 4.64 11.34 4.1 12 4.1C12.66 4.1 13.2 4.64 13.2 5.3V10.1C13.2 10.76 12.66 11.3 12 11.3ZM13.2 16.1H10.8V13.7H13.2V16.1Z"
              fill="#FF7A00"
            />
          </g>
          <defs>
            <clipPath id="clip0_1180_25964">
              <rect
                width="24"
                height="24"
                fill="white"
                transform="translate(0 0.5)"
              />
            </clipPath>
          </defs>
        </svg>
        <h2 class="m-0 ml-24">{{ "Thu hồi duyệt" | translate }}</h2>
      </div>
    </ng-template>
    <ng-template #showAddNewContentRevoke>
      <app-revoke-export-request
        (childOut)="hide($event)"
        [child]="exportRequestRevoke"
      ></app-revoke-export-request>
    </ng-template>
  </nz-modal>

  <app-popup-cancel
    [isVisible]="isVisibleCancel"
    (cancel)="onHandleCancelPopup($event)"
    (isVisibleChange)="onHandleConfirmPopup($event)"
  >
  </app-popup-cancel>

  <nz-modal
    nzWidth="800px"
    [(nzVisible)]="visibleRefuse"
    [nzFooter]="null"
    (nzOnCancel)="onClickCancelRefuse()"
    [nzContent]="showAddNewContentRefuse"
    [nzTitle]="showAddNewTitleRefuse"
  >
    <ng-template #showAddNewTitleRefuse>
      <div class="d-flex">
        <svg
          width="24"
          height="25"
          viewBox="0 0 24 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_1180_25964)">
            <path
              d="M21.6 0.5H2.4C1.08 0.5 0 1.58 0 2.9V24.5L4.8 19.7H21.6C22.92 19.7 24 18.62 24 17.3V2.9C24 1.58 22.92 0.5 21.6 0.5ZM12 11.3C11.34 11.3 10.8 10.76 10.8 10.1V5.3C10.8 4.64 11.34 4.1 12 4.1C12.66 4.1 13.2 4.64 13.2 5.3V10.1C13.2 10.76 12.66 11.3 12 11.3ZM13.2 16.1H10.8V13.7H13.2V16.1Z"
              fill="#FF7A00"
            />
          </g>
          <defs>
            <clipPath id="clip0_1180_25964">
              <rect
                width="24"
                height="24"
                fill="white"
                transform="translate(0 0.5)"
              />
            </clipPath>
          </defs>
        </svg>
        <h2 class="m-0 ml-24">{{ "Từ chối yêu cầu" | translate }}</h2>
      </div>
    </ng-template>
    <ng-template #showAddNewContentRefuse>
      <app-reason-refuse-export-request
        (childOut)="hideRefuse($event)"
        [child]="exportRequestRevoke"
      ></app-reason-refuse-export-request>
    </ng-template>
  </nz-modal>

  <app-popup-cancel
    [isVisible]="isVisibleRefuseCancel"
    (cancel)="onHandleCancelPopupRefuse($event)"
    (isVisibleChange)="onHandleConfirmPopupRefuse($event)"
  >
  </app-popup-cancel>
</div>
