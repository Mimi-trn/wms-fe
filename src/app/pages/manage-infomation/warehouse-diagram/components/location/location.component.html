<!-- <nz-row>
  <nz-col *ngFor="let location of listLocations" nzSpan="24">
    <nz-row [style]="location.parent != 0 ? 'margin-left: 28px' : ''">
      <nz-col nzSpan="24">
        <nz-row nzJustify="space-between" class="mb-4">
          <nz-col
            class="location"
            [ngClass]="location.hasChild ? 'hover-cursor-pointer' : ''"
            style="height: 24px; flex: 1"
            [style]="
              location.isLocked
                ? 'background-color: #f5f5f5'
                : 'background-color: #FFF3E8'
            "
          >
            <nz-row
              nzJustify="space-between"
              (click)="location.hasChild ? openListLocation(location) : null"
            >
              <div style="display: flex">
                <div>
                  <span
                    *ngIf="location.hasChild"
                    style="
                      color: #0000004d;
                      font-size: 16px;
                      padding: 6px;
                      transition: 0.15s ease-in-out all;
                    "
                    [style]="
                      location.isOpen
                        ? 'transform: rotate(90deg)'
                        : 'transform: rotate(0deg)'
                    "
                    nz-icon
                    nzType="caret-right"
                    nzTheme="outline"
                  ></span>
                </div>
                <div [style]="!location.hasChild ? 'margin-left: 28px' : ''">
                  <span
                    style="font-size: 14px; font-weight: 400; padding: 0px 4px"
                  >
                    {{ location.locationName }}
                  </span>
                </div>
              </div>
              <div class="is-locked" style="display: none">
                <span
                  class="mr-4 hover-cursor-pointer"
                  *ngIf="
                    location.isLocked &&
                    (checkIsRole('wms_location_update') ||
                      checkIsRole('FCIM_ADMIN'))
                  "
                  nz-icon
                  nz-tooltip="Khóa vị trí"
                  nzType="unlock"
                  nzTheme="outline"
                  style="font-size: 12px; color: #ff7a00"
                  (click)="handleLockLocation($event, location)"
                ></span>
                <span
                  class="mr-4 hover-cursor-pointer"
                  *ngIf="
                    !location.isLocked &&
                    (checkIsRole('wms_location_update') ||
                      checkIsRole('FCIM_ADMIN'))
                  "
                  nz-icon
                  nz-tooltip="Mở khóa vị trí"
                  nzType="lock"
                  nzTheme="fill"
                  style="font-size: 12px; color: #ff7a00"
                  (click)="handleLockLocation($event, location)"
                ></span>
              </div>
            </nz-row>
          </nz-col>
          <nz-col class="pl-4" style="width: 80px">
            <nz-row
              nzJustify="space-between"
              style="height: 24px; align-items: center"
            >
              <nz-col
                *ngIf="!location.hasChild"
                nzSpan="8"
                style="padding: 0 5px; background-color: #f5f5f5"
              >
                <span
                  (click)="createQR(location)"
                  class="hover-cursor-pointer"
                  nz-icon
                  nz-tooltip="Xem mã QR vị trí"
                  nzType="qrcode"
                  nzTheme="outline"
                ></span>
              </nz-col>

              <nz-col
                nzSpan="8"
                style="padding: 0 5px; background-color: #f5f5f5"
                *ngIf="
                  checkIsRole('wms_location_create') ||
                  checkIsRole('FCIM_ADMIN')
                "
              >
                <span
                  class="hover-cursor-pointer"
                  nz-icon
                  nz-tooltip="Thêm mới vị trí"
                  nzType="plus-circle"
                  nzTheme="outline"
                  style="color: #ff7a00"
                  (click)="handleOpenInputNewLocation(location)"
                ></span>
              </nz-col>
              <nz-col
                nzSpan="8"
                style="padding: 0 5px; background-color: #f5f5f5"
                *ngIf="
                  checkIsRole('wms_location_create') ||
                  checkIsRole('FCIM_ADMIN')
                "
              >
                <span
                  class="hover-cursor-pointer"
                  nz-icon
                  nz-tooltip="map vị trí"
                  nzType="link"
                  nzTheme="outline"
                  style="color: #ff7a00"
                  (click)="handleOpenMapped(location)"
                ></span>
              </nz-col>
            </nz-row>
          </nz-col>
        </nz-row>
        <nz-row>
          <nz-col *ngIf="location.isAddNew" class="mb-4" nzSpan="24">
            <nz-row nzJustify="space-between" style="margin-left: 28px">
              <nz-col style="flex: 1">
                <nz-input-group
                  style="align-items: stretch"
                  [nzSuffix]="clearLocationName"
                >
                  <input
                    id="new-location"
                    nz-input
                    type="text"
                    placeholder="Nhập tên vị trí"
                    [(ngModel)]="newLocation.locationName"
                    (keydown)="handleEnterAddNewLocation($event, location)"
                    (focusout)="onHandleFocusOut(location)"
                    autofocus
                  />
                </nz-input-group>
                <ng-template #clearLocationName>
                  <span
                    nz-icon
                    class="ant-input-clear-icon"
                    nzTheme="fill"
                    nzType="close-circle"
                    *ngIf="newLocation.locationName"
                    (click)="newLocation.locationName = ''"
                  ></span>
                </ng-template>
              </nz-col>
              <nz-col class="pl-4" style="width: 54px"></nz-col>
            </nz-row>
          </nz-col>
        </nz-row>
        <app-location
          *ngIf="location.isOpen"
          [listLocations]="location.child"
        ></app-location>
      </nz-col>
    </nz-row>
  </nz-col>
</nz-row> -->

<nz-row>
  <nz-col *ngFor="let warehouse of listLocations; let index = index" nzSpan="24">
    <nz-row nzJustify="space-between" class="mb-4">
      <!-- Tên kho -->
      <nz-col style="min-height: 30px; flex: 1">
        <nz-row nzJustify="space-between"
          class="location"
          (click)="openLocations(warehouse)">
          <div style="display: flex; align-items: center;">
            <span
              style="color: black; font-size: 16px; padding: 6px; "
              nz-icon
              [nzType]="warehouse.isOpen ? 'caret-down' : 'caret-right'"
              nzTheme="outline"
            ></span>
            <span  style="font-size: 14px; font-weight: 400; padding: 0px 4px">
              {{ warehouse.warehouseCode }} - {{ warehouse.warehouseName }}
            </span>
          </div>
        </nz-row>

        <!-- Danh sách location con -->
        <div *ngIf="warehouse.isOpen && warehouse.locationList?.length > 0" class="child-locations">
          <div *ngFor="let location of warehouse.locationList" class="child-location-item" >

            <div style="display: flex; align-items: center; justify-content: space-between; width: 100%">
              <span

              style="font-size: 13px; font-weight: 400; padding: 0px 4px; color: black;"
            >
              {{ location.locationName }}
            </span>

            <span
              style="color: black; font-size: 14px; padding: 4px;"
              nz-icon
              nzType="delete"
              nzTheme="outline"
              (click)="openPopupDelete(location, index)"
            ></span>
            </div>
          </div>
        </div>
      </nz-col>
    </nz-row>
  </nz-col>
</nz-row>


<app-popup-confirm
  [title]="'Xác nhận xoá vị trí'"
  [content]="'Xoá vị trí'"
  [isVisible]="isVisiblePopupDelete"
  (isVisibleChange)="handleDeleteLocation()"
  (cancel)="handleCancelDeleteLocation()"
></app-popup-confirm>


<!-- <nz-modal
  [(nzVisible)]="visibleQR"
  [nzFooter]="null"
  (nzOnCancel)="onHandleCancel()"
  [nzContent]="showContentCreate"
  [nzTitle]="showTitleCreate"
>
  <ng-template #showTitleCreate>
    <div class="d-flex">
      <img src="./assets/image/modalInfor.svg" alt="" />
      <h2 class="m-0 ml-24">Quét QR</h2>
    </div>
  </ng-template>
  <ng-template #showContentCreate>
    <div class="d-flex j-content-center">
      <nz-qrcode [nzValue]="valueQR"></nz-qrcode>
    </div>
  </ng-template>
</nz-modal>

<app-popup-confirm
  [title]="'Xác nhận tạo vị trí'"
  [content]="'Tạo vị trí mới'"
  [isVisible]="isVisiblePopupAdd"
  (isVisibleChange)="handleAddNewLocation()"
  (cancel)="isVisiblePopupAdd = $event"
></app-popup-confirm>

<app-popup-confirm
  [title]="
    currentLocation.isLocked
      ? 'Xác nhận mở khóa vị trí'
      : 'Xác nhận khóa vị trí'
  "
  [content]="currentLocation.isLocked ? 'Mở khóa vị trí' : 'Khóa vị trí'"
  [isVisible]="isVisiblePopupLock"
  (isVisibleChange)="handlePositionLock()"
  (cancel)="isVisiblePopupLock = $event"
></app-popup-confirm>

<app-popup-focus-out
  [isVisible]="isVisiblePopupFocusOut"
  (onCreate)="handleClickCreate()"
  (onCancelCreate)="handleCancelAddNewLocation()"
  (cancel)="isVisiblePopupFocusOut = $event"
></app-popup-focus-out>

<app-map-location-product
  [locationCode]="currentLocationCode"
  [isVisible]="isVisiblePopupMap"
  (isVisibleChange)="isVisiblePopupMap = $event"
></app-map-location-product> -->
